{
  "overallStatus": "pending",
  "scope": [
    "`runExecuteAutomatedFix` default behavior change: when `--iterations` is omitted, all open issues are processed instead of only 1 (FR-1).",
    "`runExecuteRefactor` mode change: agent is invoked with `interactive: false` instead of `interactive: true` (FR-2).",
    "Verification that no new flags, options, or dependencies are introduced by either change (FR-3).",
    "Verification that all pre-existing unit tests continue to pass and that new or updated tests cover the changed default behavior (FR-4)."
  ],
  "environmentData": [
    "Runtime: Bun v1+ with `bun:test` runner.",
    "TypeScript: strict mode; type checking via `bun tsc --noEmit` (or equivalent).",
    "Test files: `src/commands/execute-automated-fix.test.ts` and `src/commands/execute-refactor.test.ts` (co-located with source per project convention).",
    "Fixtures: temporary directories created with `mkdtemp`; seeded with `writeState` and inline issues/refactor-PRD files; cleaned up in `afterEach`.",
    "No external services required; all agent and commit calls are replaced by injectable test doubles (dependency injection via the `deps` parameter).",
    "Command run with: `bun test src/commands/execute-automated-fix.test.ts` and `bun test src/commands/execute-refactor.test.ts`.",
    "---",
    "## User Story: US-001 - Automated-Fix Processes All Open Issues by Default"
  ],
  "automatedTests": [
    {
      "id": "TC-001",
      "description": "When `--iterations` is **not** provided, `runExecuteAutomatedFix` processes **all** open issues (e.g., 3 open issues → 3 agent invocations, all marked `fixed`)",
      "status": "pending",
      "correlatedRequirements": [
        "US-001",
        "FR-1",
        "FR-4"
      ]
    },
    {
      "id": "TC-002",
      "description": "Update existing test \"defaults --iterations to 1…\" to reflect the new default: no `--iterations` → all open issues processed, not just 1",
      "status": "pending",
      "correlatedRequirements": [
        "US-001",
        "FR-1",
        "FR-4"
      ]
    },
    {
      "id": "TC-003",
      "description": "When `--iterations N` is provided, only up to N open issues are processed (existing explicit-flag behavior preserved)",
      "status": "pending",
      "correlatedRequirements": [
        "US-001",
        "FR-1",
        "FR-3"
      ]
    },
    {
      "id": "TC-004",
      "description": "Issues are processed in sorted order by ID regardless of their order in the file",
      "status": "pending",
      "correlatedRequirements": [
        "US-001",
        "FR-1"
      ]
    },
    {
      "id": "TC-005",
      "description": "Summary log line (`Summary: Fixed=X Failed=Y`) correctly reflects totals across all processed issues when no `--iterations` is passed",
      "status": "pending",
      "correlatedRequirements": [
        "US-001",
        "FR-1",
        "FR-4"
      ]
    },
    {
      "id": "TC-006",
      "description": "Command exits cleanly with the expected message when there are no open issues",
      "status": "pending",
      "correlatedRequirements": [
        "US-001",
        "FR-1"
      ]
    },
    {
      "id": "TC-007",
      "description": "TypeScript strict-mode typecheck passes after the FR-1 change (`bun tsc --noEmit`)",
      "status": "pending",
      "correlatedRequirements": [
        "US-001",
        "FR-1",
        "FR-3",
        "FR-4"
      ]
    },
    {
      "id": "TC-008",
      "description": "`invokeAgentFn` is called with `interactive: false` inside `runExecuteRefactor` (replaces the current `interactive: true` call at line ~257)",
      "status": "pending",
      "correlatedRequirements": [
        "US-002",
        "FR-2",
        "FR-4"
      ]
    },
    {
      "id": "TC-009",
      "description": "Each refactor item is processed in order and its result is recorded in the progress file after the agent call",
      "status": "pending",
      "correlatedRequirements": [
        "US-002",
        "FR-2",
        "FR-4"
      ]
    },
    {
      "id": "TC-010",
      "description": "State transition `in_progress` → `completed` occurs when all refactor items succeed",
      "status": "pending",
      "correlatedRequirements": [
        "US-002",
        "FR-2"
      ]
    },
    {
      "id": "TC-011",
      "description": "State remains `in_progress` when any refactor item fails",
      "status": "pending",
      "correlatedRequirements": [
        "US-002",
        "FR-2"
      ]
    },
    {
      "id": "TC-012",
      "description": "Refactor execution report (`it_XXXXXX_refactor-execution-report.md`) is generated after all items are processed, even when some fail",
      "status": "pending",
      "correlatedRequirements": [
        "US-002",
        "FR-2"
      ]
    },
    {
      "id": "TC-013",
      "description": "TypeScript strict-mode typecheck passes after the FR-2 change (`bun tsc --noEmit`)",
      "status": "pending",
      "correlatedRequirements": [
        "US-002",
        "FR-2",
        "FR-3"
      ]
    },
    {
      "id": "TC-014",
      "description": "No new CLI flags or options are introduced: `--agent` and `--force` are the only accepted flags for `execute refactor`",
      "status": "pending",
      "correlatedRequirements": [
        "US-002",
        "FR-3"
      ]
    },
    {
      "id": "TC-015",
      "description": "All pre-existing tests in `execute-refactor.test.ts` pass after the FR-2 change (regression guard)",
      "status": "pending",
      "correlatedRequirements": [
        "US-002",
        "FR-4"
      ]
    },
    {
      "id": "TC-016",
      "description": "All pre-existing tests in `execute-automated-fix.test.ts` pass after the FR-1 change (regression guard), except the one updated per TC-002",
      "status": "pending",
      "correlatedRequirements": [
        "US-001",
        "FR-4"
      ]
    }
  ],
  "exploratoryManualTests": []
}
